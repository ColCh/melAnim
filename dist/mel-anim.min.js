'use strict';(function(l){function f(a){var b=typeof a;"object"===b&&(b=Object.prototype.toString.call(a).slice(8,-1).toLowerCase());return b}function Q(a){var b=u;b.prototype=a;return new b}function v(a){this.collection=a;this.length=a.length}function R(a,b){return a-b}function da(a,b){return a.key-b.key}function S(a,b,e,d,h){var c,k;f.number(d)||(d=0);f.number(h)||(h=a.length-1);e=f.func(e)?e:R;do{if(d>h||!a.length)return-1;c=d+h>>1;if(k=e(b,a[c],c,a))0>k?h=c-1:d=c+1;else return c}while(1)}function w(a,
b){return function(){return a.apply(b,arguments)}}function p(a,b,e){var d,c;e=e||l;if(f.array(a)){d=0;for(c=a.length;d<c;)if(d in a){if(!1===b.call(e,a[d],d,a))break;d+=1}}else for(d in a)if(a.hasOwnProperty(d)&&!1===b.call(e,a[d],d,a))break}function D(a){var b=(a+"").match(T);return b?(a=parseFloat(b[1]),b=ea[b[2]]||1,a*b):x}function U(a){return(a+"").replace(/-[a-z]/g,function(a){return a.charAt(1).toUpperCase()})}function t(a,b){var e,d;b=!b?fa:!0===b?l:b;a in q?e=q[a]:a in b?e=a:(d=U(a),d in b?
e=q[a]=d:(d=d.charAt(0).toUpperCase()+d.slice(1),y&&z?y+d in b?e=q[a]=y+d:z+d in b&&(e=q[a]=z+d):p(ga,function(c){var g=String.prototype.toLowerCase.call(c);return c+d in b?(y=c,z=g,e=q[a]=c+d,!1):g+d in b?(y=c,z=g,e=q[a]=g+d,!1):!0})));return e}function n(a){var b=n.unique++;n.timerID||(n.timerID=setInterval(n.looper,1E3/60));n.queue[b]=a;return b}function ha(a){var b=n.queue;a in b&&delete b[a]}function J(a,b){var e=Math.pow(10,b);return Math.round(a*e)/e}function A(a,b,e,d){this.cx=3*a;this.bx=
3*(e-a)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*b;this.by=3*(d-b)-this.cy;this.ay=1-this.cy-this.by}function E(a,b){this.stepsAmount=a;this.countFromStart=b}function K(a,b){return b+a+b}function V(a){var b;f.string(a)&&(b=a in L?L[a]:parseInt(a,10));return 0<=b&&100>=b?b:x}function W(a,b,e){var d=f.undefined(e),c=d?"get":"set",g,k,j;a&&(k=t(b),b in M&&c in M[b]&&(g=M[b][c](a,k,e)),d?j=f.undefined(g)?(l.getComputedStyle?l.getComputedStyle(a,null):a.currentStyle)[k]:g:(j=f.string(e)?e:F(a,b,e,!0),
f.element(a)?a.style[k]=j:a[k]=j));return j}function F(a,b,e,d){var c,g;g=t(b);b in X?c=X[b](a,g,e,d):d?f.number(e)&&!(b in ia)&&(c=e+"px"):(b=e.match(T)[2],c=ja[b](a,g,e));return c}function G(a,b,e,d,c){return a=a in G.hooks?G.hooks[a](b,e,d,c):J((e-b)*d+b,c)}function r(a,b){f.func(a)&&(this.callback=a);f.object(b)&&(this.context=b);this.looper=w(this.looper,this)}function ka(a,b,e,d){e=d[e+1];return!e||b.key>a?-1:e.key<=a?1:0}function H(a,b,e){f.number(a)&&(this.key=a);this.properties=f.object(b)?
b:{};f.func(e)&&(this.easing=e)}function c(){this.targets=[];this.startingValues={};this.currentValues={};this.cache={};this.animationName="melAnimation"+Y++;this.keyframes=[];this.specialEasing={};this.iterations=1;this.rulesList={};this.animatedProperties={};this.addKeyframe(0,Q(this.animatedProperties));this.addKeyframe(1,Q(this.animatedProperties));this.timer=new r(this.tick,this);return this}var m=l.document,x,j=l.console,fa=m.documentElement.style,y,z,T=/(-?\d*\.?\d+)(.*)/,Y=0,u=function(){},
Z=/^cubic-bezier\(((?:\s*\d*\.?\d+\s*,\s*){3}\d*\.?\d+\s*)\)$/i,$=/^steps\((\d+(?:,\s*(?:start|end))?)\)$/i,m=m.getElementsByTagName("head")[0].parentNode.appendChild(m.createElement("style")),B=m.sheet||m.styleSheet;f.element=function(a){return"nodeType"in a&&a.nodeType===Node.ELEMENT_NODE};f.func=function(a){return a instanceof Function||"function"===f(a)};f.array=function(a){return a instanceof Array||"array"===f(a)};f.undefined=function(a){return a===x||"undefined"===f(a)};f.number=function(a){return a instanceof
Number||"number"===f(a)};f.string=function(a){return a instanceof String||"string"===f(a)};f.object=function(a){return a instanceof Object||"object"===f(a)};var C=Math.floor,aa=Math.min,la=Math.max;v.prototype.index=-1;v.prototype.length=-1;v.prototype.collection=null;v.prototype.current=function(){return this.collection[this.index]};v.prototype.next=function(){return this.index<this.length?this.collection[this.index++]:x};v.prototype.previous=function(){return 0<this.index?this.collection[this.index--]:
x};var ea={ms:1,s:1E3},ga=["ms","O","Moz","webkit"],q={},N=Date.now||function(){return+new Date},m=l[t("performance",!0)],I,O;m?(I=m[t("now",m)])?(I=w(I,m),O=m.timing.navigationStart,N=function(){return I()+O},j.log("DOMHighResTimeStamp support detected")):j.log('Found window.performance but no "now" method so DOMHighResTimeStamp isn\'t supported.'):j.log("Cannot find window.performance so DOMHighResTimeStamp isn't supported to. Using Date.now as usual.");n.timerID=null;n.unique=0;n.queue={};n.looper=
function(){var a=N();p(n.queue,function(b,e,d){b.call(l,a);delete d[e]})};A.prototype.B_absciss=function(a){return((this.ax*a+this.bx)*a+this.cx)*a};A.prototype.B_derivative_absciss=function(a){return(3*this.ax*a+2*this.bx)*a+this.cx};A.prototype.B_ordinate=function(a){return((this.ay*a+this.by)*a+this.cy)*a};A.prototype.calc=function(a){var b=w(this.B_absciss,this);a:{var e=0,d=1,c=1E-5,g=w(this.B_derivative_absciss,this),k,j,m,l,c=f.number(c)?c:1E-6;l=function(a,b){return Math.abs(a-b)<=c};k=e;
j=d;e=a;g=g(e);for(m=8;0<m--;){d=e-(b(e)-a)/g;if(l(b(d),a)){a=d;break a}e=d}e=k;for(d=j;!l(e,d);)k=b(d)-a,j=b(e)-a,e=d-e,j=k-j,g=d,d-=k*e/j,e=g;a=d}return this.B_ordinate(a)};E.prototype.stepsAmount=null;E.prototype.countFromStart=!1;E.prototype.calc=function(a){return this.countFromStart?1-this.calc(1-a):C(this.stepsAmount*a)/this.stepsAmount};K.bySpaces=function(a){return" "+a+" "};var M={},X={},ja={px:function(a,b,e){return parseFloat(e)}},ia={"fill-opacity":!0,"font-weight":!0,"line-height":!0,
opacity:!0,orphans:!0,widows:!0,"z-index":!0,zoom:!0};G.hooks={};var ba=(m=l[t("requestAnimationFrame",l)])?m:n,ma=m?l[t("cancelRequestAnimationFrame",l)]:ha;m?j.log("detected native requestAnimationFrame support"):j.log("requestAnimationFrame is not found. Using imitation.");r.prototype.callback=null;r.prototype.context=null;r.prototype.timeoutID=-1;r.prototype.start=function(){this.timeoutID=ba(this.looper)};r.prototype.stop=function(){ma(this.timeoutID);delete this.timeoutID};r.prototype.looper=
function(a){this.timeoutID=ba(this.looper);this.callback.call(this.context,a)};t("animation");var L={from:0,to:100},ca={linear:[0,0,1,1],ease:[0.25,0.1,0.25,1],easeIn:[0.42,0,1,1],easeOut:[0,0,0.58,1],easeInOut:[0.42,0,0.58,1],stepStart:[1,!0],stepEnd:[1,!1],swing:[0.02,0.01,0.47,1]},P={linear:function(a){return a},swing:function(a){return 0.5-Math.cos(a*Math.PI)/2}};H.prototype.key=0;H.prototype.easing=u;H.prototype.properties={};c.prototype.delayTime=D(0);c.prototype.fillingMode="forwards";c.prototype.animationTime=
D("400ms");c.prototype.iterations=1;c.prototype.integralIterations=C(1);c.prototype.animationDirection="normal";c.prototype.smoothing=P.ease;c.prototype.oncomplete=u;c.prototype.oniteration=u;c.prototype.onstep=u;c.prototype.digits=5;c.prototype.cache=null;c.prototype.currentValues=null;c.prototype.startingValues=null;c.prototype.animationName="";c.prototype.targets=null;c.prototype.rulesList=null;c.prototype.keyframes=null;c.prototype.animatedProperties=null;c.prototype.specialEasing=null;c.prototype.started=
0;c.prototype.currentIteration=0;c.prototype.elapsedTime=0;c.prototype.fractionalTime=0;c.prototype.animationProgress=0;c.prototype.timer=null;c.prototype.element=function(a){var b;if(f.element(a)){b="melAnimation"+Y++;var e=this.rulesList,c="."+b,h,g=B.cssRules||B.rules,k=g.length;h=" ";B.insertRule?B.insertRule(c+" {"+h+"}",k):B.addRule(c,h,g.length);e[b]=g[k];-1===K.bySpaces(a.className).indexOf(K.bySpaces(b))&&(a.className+=" "+b);a.setAttribute("melAnimation-data-id",b);this.cache[b]={};this.startingValues[b]=
{};this.currentValues[b]={};this.targets.push(a)}else a=Array.prototype.slice.call(a,void 0,void 0),p(a,this.element,this)};c.prototype.duration=function(a){var b=D(a);f.number(b)?(this.animationTime=b,this.digits=C(Math.log(60*this.animationTime)*Math.LOG10E)-2,j.log('duration: computed epsilon is "'+this.digits+'" digits')):j.warn('duration: bad value "'+a+'"')};c.prototype.onComplete=function(a){f.func(a)?this.oncomplete=a:j.warn("onComplete: callback is not a function : %o",a)};c.prototype.easing=
function(a,b,e){var c,h,g,k;if(f.func(a))c=a;else if(f.string(a)&&(k=a.replace(/^\s+|\s+$/g,""),g=U(k),g in P?c=P[g]:g in ca?h=ca[g]:Z.test(k)?h=k.match(Z)[1].split(","):$.test(k)&&(h=k.match($)[1].split(",")),h))if(4===h.length){var m=parseFloat,l=[];p(h,function(a,b,c){l.push(m.call(void 0,a,b,c))});h=l;0<=h[0]&&1>=h[0]&&(0<=h[2]&&1>=h[2])&&(c=new A(h[0],h[1],h[2],h[3]))}else 2===h.length&&(g=parseInt(h[0],10),h="start"===h[1],f.number(g)&&(c=new E(g,h)));f.func(c)?f.string(e)?this.specialEasing[e]=
c:f.undefined(b)?this.smoothing=c:(a=V(b),f.number(a)&&(a*=0.01,a=this.lookupKeyframe(a)||this.addKeyframe(a),a.easing=c)):j.warn("easing: cannot form a function from arguments %o",a)};c.prototype.direction=function(a){"normal"===a||"reverse"===a||"alternate"===a||"alternate-reverse"===a?this.animationDirection=a:j.warn('direction: invalid value "%s"',a)};c.prototype.delay=function(a){var b=D(a);f.number(b)?this.delayTime=b:j.warn('delay: cannot parse value "%s"',a)};c.prototype.fillMode=function(a){"forwards"===
a||"backwards"===a||"both"===a||"none"===a?this.fillingMode=a:j.warn('fillMode: invalid value "%s"',a)};c.prototype.iterationCount=function(a){var b;if("infinite"===a)b=Number.POSITIVE_INFINITY;else if(b=parseFloat(a),!isFinite(b)||0>b){j.warn('iterationCount: passed iterations is not a number or is negative "%s"',a);return}this.iterations=b;this.integralIterations=C(b)};c.prototype.start=function(){0<this.delayTime?(j.log("start: "+this.animationName+' has positite delay "'+this.delayTime+'" ms'),
setTimeout(w(this.timer.start,this.timer),this.delayTime)):(j.log("start: "+this.animationName+' has non-positite delay "'+this.delayTime+'" so starting right now.'),this.timer.start());p(this.targets,function(a){var b=a.getAttribute("melAnimation-data-id"),c=this.startingValues[b];p(this.animatedProperties,function(b,h){var g=W(a,h);c[h]=F(a,h,g,!1)},this)},this);this.started=N();this.tick(this.started);j.log('start: animation "'+this.animationName+'" started')};c.prototype.stop=function(){var a;
this.timer.stop();if("forwards"===this.fillingMode||"both"===this.fillingMode)a=this.needsReverse(this.iterations)?1:0,j.log('stop: animation fills forwards and has direction "'+this.animationDirection+'" and iteration count "'+this.iterations+'" so fetching with keyframe "'+a+'"'),this.fetch(a),this.render(!0);p(this.rulesList,function(a){a.style.cssText=""});j.log("stop: CSSRules are cleared.");j.log('stop: animation "'+this.animationName+'" stopped')};c.prototype.step=function(a){f.func(a)&&(this.onstep=
a)};c.prototype.propAt=function(a,b,c){var d;d=f.undefined(c)?L.to:c;d=V(d);d*=0.01;f.number(d)?(c=this.lookupKeyframe(d)||this.addKeyframe(d),this.animatedProperties[a]=null,c.properties[a]=b):j.warn('propAt: passed keyframe key is invalid "%s"',c)};c.prototype.addKeyframe=function(a,b,c){var d;if(f.number(a)){d=new H(a,b,c);a=this.keyframes;a.push(d);b=da;var h=c=void 0,g,k,j;f.number(c)||(c=0);f.number(h)||(h=a.length-1);f.func(b)||(b=R);for(k=c;k<h;k+=1)for(g=c;g<h-k;g+=1)0<b(a[g],a[g+1],g,a)&&
(j=a[g],a[g]=a[g+1],a[g+1]=j)}return d};c.prototype.lookupKeyframe=function(a){a=S(this.keyframes,a,function(a,c){return a-c.key});return this.keyframes[a]};c.prototype.fetch=function(a){var b,c,d,h,g,f,j,m,l,n,t;b=this.keyframes;t=Math.pow(10,-this.digits);m=this.smoothing;l=S(b,a,ka);-1!==l&&b[l].easing!==u&&(m=b[l].easing);p(this.targets,function(l){var q,r,u;q=l.getAttribute("melAnimation-data-id");r=this.startingValues[q];u=this.currentValues[q];p(this.animatedProperties,function(q,s){var v;
c=b[0];d=b[b.length-1];p(b,function(b){if(s in b.properties){if(a<b.key||1===a&&1===b.key)return d=b,!1;c=b}return!0});f=c.key;j=1/(d.key-c.key);n=m((a-f)*j,t);n=J(n,this.digits);null===c.properties[s]?h=r[s]:(h=c.properties[s],h=F(l,s,h,!1));null===d.properties[s]?g=r[s]:(g=d.properties[s],g=F(l,s,g,!1));v=G(s,h,g,n,this.digits);u[s]=v},this)},this)};c.prototype.render=function(a){p(this.targets,function(b){var c,d,f;c=b.getAttribute("melAnimation-data-id");d=this.rulesList[c];c=this.currentValues[c];
b=b.style;d=d.style;f=a?b:d;p(c,function(a,b){W(f,b,a)},this)},this)};c.prototype.tick=function(a){var b,c,d;b=this.iterations;c=this.currentIteration;a=this.animationProgress=this.computeProgress(a);d=this.currentIteration=this.computeIteration(this.animationProgress);this.fractionalTime=this.computeFractionalTime(this.animationProgress,this.currentIteration);if(d!==c)j.log('tick: "'+this.animationName+'" - iteration "'+d+'" of total "'+b+'"'),this.oniteration();else{if(a>=b){this.stop();this.oncomplete();
return}this.onstep()}this.fetch(this.fractionalTime);this.render(!1)};c.prototype.computeProgress=function(a){a=this.computeElapsedTime(a)/this.animationTime;return a=J(a,this.digits)};c.prototype.computeIteration=function(a){a=C(a);return aa(a,this.integralIterations)};c.prototype.computeFractionalTime=function(a,b){var c;c=aa(a-b,1);this.needsReverse(b)&&(c=1-c);return c};c.prototype.computeElapsedTime=function(a){1E12>a&&(a+=O);a-=this.started;a+=-1*this.delayTime;return a=la(a,0)};c.prototype.needsReverse=
function(a){var b,c;c=this.animationDirection;b=1===(a&1);return a=(a="reverse"===c||"alternate"===c&&b)||"alternate-reverse"===c&&!b};c.prototype.element=c.prototype.element;c.prototype.delay=c.prototype.delay;c.prototype.duration=c.prototype.duration;c.prototype.direction=c.prototype.direction;c.prototype.easing=c.prototype.easing;c.prototype.fillMode=c.prototype.fillMode;c.prototype.iterationCount=c.prototype.iterationCount;c.prototype.onComplete=c.prototype.onComplete;c.prototype.propAt=c.prototype.propAt;
c.prototype.start=c.prototype.start;c.prototype.stop=c.prototype.stop;l.KeyframeAnimation=c})(window);
